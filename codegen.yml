overwrite: true
watch: true
schema:
  - http://localhost:1337/v1/graphql
  - functions/_shared/schema-overrides.gql
headers:
  x-hasura-admin-secret: nhost-admin-secret
documents:
  - 'src/**/*.gql'
  - 'functions/_shared/fragments/*.gql'
generates:
  src/graphql.generated.ts:
    plugins:
      - typescript
      - typescript-operations
      - typescript-react-apollo
      - add:
          content: |
            import { MemberPreferences } from '@shared/model/member'
            import { MeetingAttendee, MeetingStepConfig, VideoConf } from '@shared/model/meeting'
            import { MeetingStepData } from '@shared/model/meeting_step'
            import { ThreadActivityData } from '@shared/model/thread_activity'
            import { LogDisplay, EntitiesChanges } from '@shared/model/log'
    config:
      withRefetchFn: true

config:
  # Required for merge-and-override of schemas
  ignoreFieldConflicts: true
  # Set scalars to avoid "any" type
  scalars:
    uuid: string
    smallint: number
    bigint: number
    timestamptz: string
    citext: string
    member_preferences: MemberPreferences
    attendee: MeetingAttendee
    meeting_step_config: MeetingStepConfig
    meeting_step_data: MeetingStepData
    videoconf: VideoConf
    thread_activity_data: ThreadActivityData
    log_display: LogDisplay
    log_changes: EntitiesChanges
